# MOEX ISS API Quote Downloader

Этот проект предназначен для загрузки исторических данных по фьючерсам и опционам RTS с использованием MOEX ISS API и сохранения их в базу данных SQLite.

## Структура проекта

Начальная загрузка с 2014 года.

## Использование

* `sqlighter3_RTS_day.py` - при запуске скрипт создает базу данных. 
При вызове из других скриптов получает доступ к БД.
* `update_futures_RTS_day.py` - обновляет (добавляет) данные в БД по фьючерсам.
* `update_options_RTS_day.py` - обновляет (добавляет) данные в БД по опционам.
Переход контракта за день до экспирации, чтобы исключить ОИ=0 последнего дня.

![2025-02-19_143237.png](2025-02-19_143237.png)

![2025-02-19_143422.png](2025-02-19_143422.png)


## Основные файлы

- **`update_futures_RTS_day.py`**  
  Скрипт для загрузки данных по фьючерсам RTS с MOEX ISS API и сохранения их в таблицу `Futures` базы данных.

- **`update_options_RTS_day.py`**  
  Скрипт для загрузки данных по опционам RTS с MOEX ISS API и сохранения их в таблицу `Options` базы данных.

- **`del_value_table_options_db.py`**  
  Утилита для очистки таблицы `Options` в базе данных.

- **`sqlighter3_RTS_day.py`**  
  Модуль для работы с базой данных SQLite, включая создание таблиц, добавление данных и выполнение запросов.

## Установка

1. Убедитесь, что у вас установлен Python 3.8 или выше.
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt

Использование
Загрузка данных по фьючерсам
Убедитесь, что база данных создана и таблицы Futures и Options существуют.
Запустите скрипт update_futures_RTS_day.py:
Загрузка данных по опционам
Убедитесь, что таблица Futures содержит актуальные данные.
Запустите скрипт update_options_RTS_day.py:
Очистка таблицы Options
Для удаления всех записей из таблицы Options выполните:

### Структура базы данных
Таблица Futures

TRADEDATE (DATE) — Дата торгов.  
SECID (TEXT) — Идентификатор инструмента.  
OPEN, LOW, HIGH, CLOSE (REAL) — Цены открытия, минимума, максимума и закрытия.  
VOLUME (INTEGER) — Объем торгов.  
OPENPOSITION (INTEGER) — Открытые позиции.  
SHORTNAME (TEXT) — Короткое имя инструмента.  
LSTTRADE (DATE) — Последний день торгов.  

Таблица Options

ID (INTEGER) — Уникальный идентификатор.  
TRADEDATE (DATE) — Дата торгов.  
SECID (TEXT) — Идентификатор инструмента.  
OPENPOSITION (INTEGER) — Открытые позиции.  
NAME (TEXT) — Название инструмента.  
LSTTRADE (DATE) — Последний день торгов.  
OPTIONTYPE (TEXT) — Тип опциона (CALL/PUT).  
STRIKE (INTEGER) — Страйк.  

### Примечания
Скрипты используют API MOEX ISS для получения данных. Убедитесь, что у вас есть доступ к интернету.
Данные сохраняются в SQLite базе данных, путь к которой задается в скриптах.
Лицензия
Этот проект распространяется под лицензией MIT. ```